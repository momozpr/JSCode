<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<style type="text/css">
		#parent {
			width: 600px;
			height: 20px;
			background: #CCC;
			position: relative;
			margin: 10px auto;
		}
		#div1 {
			width: 20px;
			height: 20px;
			background: red;
			position: absolute;
			left: 0;
			top: 0;
		}
		#div2 {
			width: 0;
			height: 0;
			background: green;
		}
	</style>
	<script type="text/javascript">
		window.onload = function(){
			var oDiv1 = document.getElementById('div1');
			var oParent = document.getElementById('parent');
			var oDiv2 = document.getElementById('div2');

			var disX = 0;

			oDiv1.onmousedown = function(ev){
				var oEvent = ev||event;

				//计算鼠标和div的坐标距离
				disX = oEvent.clientX-oDiv1.offsetLeft;
				document.title = oDiv1.offsetLeft;

				document.onmousemove = function(ev){
					var oEvent = ev||event;
					// document.title = oDiv1.offsetLeft;
					var l = oEvent.clientX-disX;

					if(l<0){
						l=0;
					}
					if(l>oParent.offsetWidth-oDiv1.offsetWidth){
						l=oParent.offsetWidth-oDiv1.offsetWidth;
					}
					oDiv1.style.left = l +'px';

					oDiv2.style.width = l + 'px';
					oDiv2.style.height = l + 'px';
				}

				document.onmouseup = function(){
					document.onmousemove = null;
					document.onmouseup = null;
				}
				//阻止火狐的鬼影bug
				return false;
			}
		}
	</script>
</head>
<body>
	<div id="parent">
		<div id="div1"></div>
	</div>
	<div id="div2">
		
	</div>
</body>
</html>